<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/DatePicker/DatePicker.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/DatePicker/DatePicker.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// React
import { useState, useRef, useEffect } from "react"

// Components
import Calendar from "../Calendar/Calendar"

// Calculation
import { standardDate } from "../../utils/fillCalendar"

// assets
import resetField from "../../assets/xmark.svg"

// Style
import datePickerStyle from "./DatePicker.module.scss"

/**
 * Represents a DatePicker component allowing users to select a date.
 * This component integrates a popup calendar for date selection and provides a resettable input field.
 *
 * @param {Object} props - The props of the component.
 * @param {string} props.name - The name attribute for the input element, used for form submission.
 * @param {string} props.label - The text label associated with the date picker input.
 * @param {boolean} props.formSubmitted - A boolean indicating if the associated form has been submitted.
 * @param {Function} props.onDateChange - A callback function to handle the change in selected date.
 */
const DatePicker = ({ name, label, formSubmitted, onDateChange }) => {
  const [isCalendarVisible, setCalendarVisibility] = useState(false)
  const [selectedDate, setSelectedDate] = useState(new Date())
  const [showReset, setShowReset] = useState(false)

  const inputRef = useRef(null)
  const calendarRef = useRef(null)

  /**
   * Handles the selection of a date from the calendar, either as a Date object or a string.
   * It updates the selected date, hides the calendar, triggers the onDateChange callback,
   * and shows the reset button.
   *
   * @param {Date|string} date - The date selected from the calendar.
   */
  const handleDateSelect = date => {
    setSelectedDate(typeof date === "string" ? standardDate(date) : date)
    setCalendarVisibility(false)
    onDateChange(selectedDate)
    if (inputRef.current) {
      setShowReset(true)
    }
  }

  const toggleCalendar = () => {
    setCalendarVisibility(!isCalendarVisible)
  }

  const resetInput = () => {
    if (inputRef.current) {
      inputRef.current.value = ""
      setShowReset(false)
    }
    setSelectedDate(new Date())
    onDateChange(new Date())
  }

  const hasClickOutside = event => {
    if (
      calendarRef.current &amp;&amp;
      !calendarRef.current.contains(event.target) &amp;&amp;
      !inputRef.current.contains(event.target)
    )
      setCalendarVisibility(false)
  }

  useEffect(() => {
    if (formSubmitted) setShowReset(false)

    document.addEventListener("mousedown", hasClickOutside)
    return () => document.removeEventListener("mousedown", hasClickOutside)
  }, [formSubmitted, showReset])

  return (
    &lt;article className={datePickerStyle.container}>
      &lt;div className={datePickerStyle.input}>
        &lt;label htmlFor={name}>{label}&lt;/label>
        &lt;input
          id={name}
          type="text"
          onClick={toggleCalendar}
          ref={inputRef}
          className={datePickerStyle.input}
          required
        />
        {showReset &amp;&amp; !formSubmitted &amp;&amp; (
          &lt;button onClick={resetInput} className={datePickerStyle.reset}>
            &lt;img
              src={resetField}
              alt="Reset input"
              className={datePickerStyle.xmark}
            />
          &lt;/button>
        )}
      &lt;/div>
      {isCalendarVisible &amp;&amp; (
        &lt;div ref={calendarRef} className={datePickerStyle.calendarWrapper}>
          &lt;Calendar
            inputId={name}
            selectedDate={selectedDate}
            onDateSelect={handleDateSelect}
          />
        &lt;/div>
      )}
    &lt;/article>
  )
}

export default DatePicker
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Calendar">Calendar</a></li><li><a href="global.html#DatePicker">DatePicker</a></li><li><a href="global.html#DaysTable">DaysTable</a></li><li><a href="global.html#Modal">Modal</a></li><li><a href="global.html#MonthList">MonthList</a></li><li><a href="global.html#Pagination">Pagination</a></li><li><a href="global.html#Select">Select</a></li><li><a href="global.html#SortingHeader">SortingHeader</a></li><li><a href="global.html#UList">UList</a></li><li><a href="global.html#createMonthsCalendars">createMonthsCalendars</a></li><li><a href="global.html#getFirstDayOfTheMonth">getFirstDayOfTheMonth</a></li><li><a href="global.html#getMonths">getMonths</a></li><li><a href="global.html#standardDate">standardDate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri Mar 29 2024 23:25:42 GMT+0100 (heure normale dâ€™Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
